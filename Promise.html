<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise JS</title>
</head>
<body>
    <script>
        /*

        stages: pending
                fulfilled
                Rejected
        
        Promise: Resolve()    >>  then()
                 Reject()    >>  catch()

        Syntax:
        let hello= new promise();
        
        let prom=promise(function(resolve,reject){
            if(condition){
                resolve();
            }else{
                reject();
            }
        });

        prom.then(onFulfilment);
        prom.catch(onRejection);

        let onFulfilment=(result)=>{
            console.log(result);
        }
        let onRejection=(error)=>{
            console.log(error);
        }
        */

        let a=true;
        let prom=new Promise(function(resolve,reject){
            if(a){
                resolve(" Successful ");
            }else{
                reject(" Error ");
            }
        });

        console.log(prom);



        //AJAX and SetTimeout in Promise

        function promi(complete){               //promi=(complete)=>{}
            return new Promise(function(resolve,reject){
                console.log("Fetching data, please wait")
                setTimeout(()=>{                //from line 62 to 65 it used in AJAX
                    if(complete){
                        resolve("I am successful");
                    }else{
                        reject("I am failed");
                    }
                },3000)
            });
        }

        /*
        let onFulfill=(result)=>{
            console.log(result);
        }
        let onReject=(error)=>{
            console.log(error);
        }

        promi(true).then(onFulfill).catch(onReject);
        //promi(false).then(onFulfill).catch(onReject);
        */


        //shortcut trick: from line no 72 to 80 

        promi(true).then((result)=>{
            console.log(result);
        }).catch((error)=>{
            console.log(error);
        });
    </script>
</body>
</html>